function insertGallery(e){if(galleryAction==="create"){detectPlugin("rasgallery");var t='<div class="mceNonEditable pluginContainer galleryPlugin" data-gallery-id="'+e+'"></div>';t+="<br />";editorGlobal.insertContent(t)}popup.close()}const GALLERY_URL=tinymce.baseURL+"/../../../article/gallery?context=1";var galleryAction="create";tinymce.PluginManager.add("rasgallery",function(e,t){function n(e){var t,n;t=r();if($(e.selection.getNode()).hasClass("mceNonEditable")&&$(e.selection.getNode()).hasClass("galleryPlugin")){t.file+="&galleryId="+$(e.selection.getNode()).data("galleryId");galleryAction="update"}n={window:window,editor_id:e.editor_id,popup:t};popup=e.windowManager.open(t,n)}function r(){var e=$(window).height()*9/10;if(e>900){e=900}return{file:GALLERY_URL,title:"Insert gallery",width:$(window).width()*9/10,height:e,close_previous:"no",resizable:"yes",onInit:function(e){init()}}}e.addButton("rasgallery",{icon:"none",image:t+"../../../../../css/images/galerija_icon.png",text:"Insert gallery",tooltip:"Insert/edit gallery",stateSelector:"div[data-gallery-id]",onclick:function(){n(e)}});e.addMenuItem("rasgallery",{text:"Edit plugin",image:t+"../../../../../css/images/galerija_icon.png",onPostRender:function(){handleDisabledState(this,"div.galleryPlugin")},context:"delete",prependToContext:true,menu:[{text:"Edit this gallery",onclick:function(){e.focus();n(e)},context:"insert"},{text:"Remove gallery",onclick:function(){deletePlugin("galleryPlugin")},context:"delete"}]})})