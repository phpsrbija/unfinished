function insertBeforeAfterWidget(){detectPlugin("rasbeforeafter");var e=$(getIframe()).contents().find('input[name="before"]').data();var t=$(getIframe()).contents().find('input[name="after"]').data();var n=$(getIframe()).contents().find("input:checked").attr("id");var r='<figure class="editorPlugin" title="'+e.alt+'"';r+='data-media="'+e.pathname1+'"';r+='data-media440="'+e.pathname2+'"';r+='data-media900="'+e.pathname3+'">';r+="</figure>"+"<noscript>"+'<img class="editorPlugin" src="'+e.pathname2+'" alt="'+e.alt+'" />'+"</noscript>";var i='<figure class="editorPlugin" title="'+t.alt+'"';i+='data-media="'+t.pathname1+'"';i+='data-media440="'+t.pathname2+'"';i+='data-media900="'+t.pathname3+'">';i+="</figure>"+"<noscript>"+'<img class="editorPlugin" src="'+t.pathname2+'" alt="'+t.alt+'" />'+"</noscript>";var s='<div class="mceNonEditable pluginContainer beforeAfterPlugin '+n+'"'+'data-before-after-id="'+e.beforeAfterId+'">'+r+i+"</div>";s+="<br />";var o=new tinymce.dom.ScriptLoader;o.add("/resources/js/adaptive/jquery-picture.js?v=2");o.loadQueue(function(){editorGlobal.insertContent(s);popup.close();$("figure.editorPlugin").ready(function(){$("iframe").contents().find("figure").picture()})})}var URL=tinymce.baseURL+"/../../../article/beforeAfter?context=1&t="+Math.random();tinymce.PluginManager.add("rasbeforeafter",function(e,t){function n(e){var t,n;t=r();if($(e.selection.getNode()).hasClass("mceNonEditable")&&$(e.selection.getNode()).hasClass("beforeAfterPlugin")){var i=1;if($(e.selection.getNode()).hasClass("vertical")){i=0}}n={window:window,editor_id:e.editor_id,popup:t};popup=e.windowManager.open(t,n)}function r(){var e=$(window).height()*9/10;if(e>700){e=700}return{file:URL,title:"Insert before/after widget",width:$(window).width()*9/10,height:e,close_previous:"no",resizable:"yes",onInit:function(e){init()}}}e.addButton("rasbeforeafter",{text:"Before/after",icon:"none",image:t+"../../../../../css/images/ikonica.png",tooltip:"Insert image",stateSelector:"div[data-before-after-id]",onclick:function(){n(e)}});e.addMenuItem("rasbeforeafter",{text:"Edit plugin",image:t+"../../../../../css/images/ikonica.png",onPostRender:function(){handleDisabledState(this,"div.beforeAfterPlugin")},context:"delete",prependToContext:true,menu:[{text:"Create new before/after",onclick:function(){e.focus();n(e)},context:"insert"},{text:"Remove before/after",onclick:function(){deletePlugin("beforeAfterPlugin")},context:"delete"}]})})