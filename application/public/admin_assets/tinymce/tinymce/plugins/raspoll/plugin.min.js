function insertPoll(e){if(pollAction==="create"){detectPlugin("raspoll");var t='<div class="mceNonEditable pluginContainer pollPlugin twelvecol" data-poll-id="'+e+'"></div>';t+="<br />";editorGlobal.insertContent(t)}popup.close()}const POLL_URL=tinymce.baseURL+"/../../../article/poll?context=1";var pollAction="create";tinymce.PluginManager.add("raspoll",function(e,t){function n(e){var t,n;t=r();if($(e.selection.getNode()).hasClass("mceNonEditable")&&$(e.selection.getNode()).hasClass("pollPlugin")){t.file+="&pollId="+$(e.selection.getNode()).data("pollId");pollAction="update"}n={window:window,editor_id:e.editor_id,popup:t};popup=e.windowManager.open(t,n)}function r(){var e={file:POLL_URL,title:"Insert/edit poll",width:1200,height:700,close_previous:"no",resizable:"yes",onInit:function(e){init()}};return e}e.addButton("raspoll",{icon:"none",image:t+"../../../../../css/images/poll_icon.png",text:"Insert poll",tooltip:"Insert/edit poll",stateSelector:"div[data-poll-id]",onclick:function(){n(e)}});e.addMenuItem("raspoll",{text:"Edit plugin",image:t+"../../../../../css/images/poll_icon.png",onPostRender:function(){handleDisabledState(this,"div.pollPlugin")},context:"delete",prependToContext:true,menu:[{text:"Edit this poll",onclick:function(){e.focus();n(e)},context:"insert"},{text:"Remove poll",onclick:function(){deletePlugin("pollPlugin")},context:"delete"}]})})