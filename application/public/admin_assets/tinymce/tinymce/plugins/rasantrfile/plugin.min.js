tinymce.PluginManager.add("rasantrfile",function(e,t){function r(){var e,t,r;r={type:"listbox",name:"align",id:"align",label:"Align",onclick:function(e){n=this.value()},values:[{text:"Left",value:"left"},{text:"Right",value:"right"},{text:"Center",value:"center"}]};e=[{name:"rasantrfile",type:"textbox",minWidth:500,minHeight:250,multiline:true,label:"Enter text",id:"rasantrfile"},r];t={title:"Create antrfile box",width:700,height:400,close_previous:"no",resizable:"yes",body:[{title:"Embed form",type:"form",items:e}],buttons:[{text:"Close",onclick:function(){tinymce.activeEditor.windowManager.close()}},{text:"Insert",onclick:function(e){i()}}]};return t}function i(){detectPlugin("rasantrfile");if($("#rasantrfile").val()!==""){var e='<div class="mceNonEditable pluginContainer antrfilePlugin antrfile'+n+'" data-antrfile-plugin="1"><div class="mceEditable">';e+="<p>"+$("#rasantrfile").val()+"</p>";e+="</div></div>";e+="<br />";editorGlobal.insertContent(e)}popup.close()}var n="left";e.addButton("rasantrfile",{icon:"",text:"Antrfile",tooltip:"Insert antrfile",stateSelector:"div[data-antrfile-plugin]",cmd:"rasantrfile_create"});e.addMenuItem("rasantrfile",{icon:"delete",text:"Remove antrfile",onPostRender:function(){handleDisabledState(this,"div.antrfilePlugin")},cmd:"rasantrfile_remove",prependToContext:true});e.addCommand("rasantrfile_create",function(t,n){var i,s;i=r();s={window:window,editor_id:e.editor_id,popup:i};popup=e.windowManager.open(i,s)});e.addCommand("rasantrfile_remove",function(e,t){var n=$(tinyMCE.activeEditor.selection.getNode());if(n.closest(".pluginContainer").hasClass("imagePlugin")){console.log("image plugin clicked inside of a antrfile");n.closest(".pluginContainer").closest(".antrfilePlugin").remove()}if(n.closest(".pluginContainer").hasClass("antrfilePlugin")){n.closest(".pluginContainer").remove()}})})